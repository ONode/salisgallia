angular.module("app").controller("PreviewController",["$scope","$stateParams","$q","$http","Basemap",function(l,f,m,n,q){setInterval(function(){jQuery(".star-1").fadeOut(150).delay(2E3).fadeIn(300).fadeOut(150).delay(1254);jQuery(".star-2").fadeOut(300).fadeIn(120).fadeOut(120).delay(1920);jQuery(".star-3").fadeOut(150).delay(1200).fadeIn(300).fadeOut(150).delay(800);jQuery(".star-4").fadeOut(700).fadeIn(300).fadeOut(160).delay(1350)},1);var r=f.id,d=f.lang,p={getGeo:function(){var a=m.defer();n({method:"GET",
  url:"https://api.userinfo.io/userinfos"}).then(function(b){a.resolve(b.data)},function(a){console.log("error",a)});return a.promise},getMetaDict:function(){var a=m.defer();n({method:"GET",url:"https://cdn.rawgit.com/GDxU/gallerygo/master/configurations.json"}).then(function(b){a.resolve(b.data)},function(b){a.reject(b)});return a.promise}};l.OnClickFn={installapp:function(){this.rotating=!this.rotating;p.getGeo().then(function(a){console.log(a);window.location.href="https://play.google.com/store/apps/details?id=com.zyntauri.gogallery&hl=zh-TW"},
  function(a){alert("error to detect",a)})},rotating:!1,ondetect:function(a){console.log(a)}};p.getMetaDict().then(function(a){q.findOne({filter:{where:{id:r}}}).$promise.then(function(b){var f=b.folder_base_name,g=parseInt(b.image_meta.shape),h;h=5==g||2==g||1==g?b.image_meta.dimension.r+" cm \u534a":b.image_meta.dimension.x+" x "+b.image_meta.dimension.y+" cm";for(var k=0;k<a.shape.length;k++)if(a.shape[k].key==g){var c;c=a.shape[k].label;if(null==d||""==d)c=c.cn;else{var e;e=d;"ja"==d&&(e="jp");
  "zh"==d&&(e="cn");"it"==d&&(e="en");"ko"==d&&(e="kr");c=c.hasOwnProperty(e)?c[e]:c.cn}h=c+" "+h}l.ThisArticle={meta:b.image_meta,size:h,preview:"http://dobsh22.s3.amazonaws.com/basemap/"+f+"/"+f+".jpg"}})})}]);
